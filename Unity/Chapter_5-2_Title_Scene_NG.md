# 5-2.タイトル場面の実装
<br>
この章では、アプリの場面遷移を実装します。
ここでは、タイトル場面を実装します。
<br>
<br>
<br>



タイトル場面は、アプリ起動直後に呼ばれ、ボタン選択により、フィールド場面に遷移したり、終了します。
<br>


最初に「Project」ビューの「Scenes」フォルダ内に「Scene」を作成し「Title」と名付けて下さい。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


「Hierarchy」から空の「GameObject」を作成し「Scene_Manager」と名付けて下さい。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


「C#スクリプト」を作成し「Title_Manager.cs」と名付け、「Scene_Manager」オブジェクトに張り付けて下さい。
同様に前章で作成した「Debug_EX.cs」を張り付けて下さい。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


「Title_Manager.cs」には、以下をコピー&ペーストして下さい。

```c#:Title_Manager.cs
//------------------------------------------------------------------------
// ● 使用ライブラリの宣言
//------------------------------------------------------------------------
using UnityEngine;
using System.Collections;
//========================================================================
// ■ Title_Manager
//------------------------------------------------------------------------
//	タイトル場面の管理クラス。
//========================================================================

public class Title_Manager : Scene_Manager {
	//--------------------------------------------------------------------
	// ● メンバ変数
	//--------------------------------------------------------------------

	//--------------------------------------------------------------------
	// ● 初期化
	//--------------------------------------------------------------------
	protected override void Start() {
		base.Start();	// 基盤の処理を呼ぶ
	}
	//--------------------------------------------------------------------
	// ● 更新
	//--------------------------------------------------------------------
	protected override void Update() {
		base.Update();	// 基盤の処理を呼ぶ
	}
}
```

次に、前章でプレハブ化した「EventSystem」プレハブを場面に配置します。
これを行うことで、UIでの入力を他場面と共通して使用出来ます。

「Project」ビューから「Prefabs」フォルダ内の「EventSystem」プレハブを「Hierarchy」に
ドラッグ&ドロップして下さい。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


同様に「Canvas」プレハブを配置します。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


「Canvas」の子に、空の「GameObject」を作成し「UI_Title」と名付けます。
子に「Image」、「Text」、「Button」2つを作成して下さい。
「Image」を「Background」と名付け、
「Button」を「Button_Start」「Button_End」と名付けます。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


「Background」には、好きな画像、色を設定し、画面を全て隠すように配置します。
「Text」には、アプリのタイトルを入力します。
「Button」2つは、少し離して配置し、子の「Text」から「開始」や「終了」等の文章を設定します。
大よそ、図のように配置します。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


「UI_Title」に「C#スクリプト」を追加し「UI_Title.cs」と名付けます。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


「UI_Title.cs」には、以下をコピー&ペーストして下さい。

```c#:UI_Title.cs
//------------------------------------------------------------------------
// ● 使用ライブラリの宣言
//------------------------------------------------------------------------
using UnityEngine;
using UnityEngine.UI;
using System.Collections;
using UnityEngine.SceneManagement;
//========================================================================
// ■ UI_Title
//------------------------------------------------------------------------
//	タイトルのUIクラス。
//========================================================================

public class UI_Title : MonoBehaviour {
	//--------------------------------------------------------------------
	// ● メンバ変数
	//--------------------------------------------------------------------

	//--------------------------------------------------------------------
	// ● 初期化
	//--------------------------------------------------------------------
	void Start() {
	}
	//--------------------------------------------------------------------
	// ● 更新
	//--------------------------------------------------------------------
	void Update() {
	}
	//--------------------------------------------------------------------
	// ● ボタンが押されたコールバック関数
	//--------------------------------------------------------------------
	public void on_click(Button button) {
		// 押されたボタン名で分岐
		switch (button.name) {
			// 開始ボタンの場合
			case "Button_Start":
				SceneManager.LoadScene("Field");	// フィールド場面に遷移
				break;

			// 終了ボタンの場合
			case "Button_End":
				Application.Quit();					// アプリ終了
				break;
		}
	}
}
```


「Button」2つは、「Button」コンポーネント内の「On Click ()」の枠右下の「+」を押し、
「None (Object)」に「UI_Title」オブジェクトをドラッグし、
「No Function」を「UI_Title」→「on_click (Button)」に設定し、
「None (Button)」に自身のオブジェクトをドラッグします。
![](/Graphics/Test/Test.jpg)  
**図. テスト画像**
<br>


これを「Button」2つに設定すると、ボタンがマウスクリックされた際に、反応し、
場面遷移するようになります。


